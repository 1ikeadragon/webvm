FROM --platform=i386 i386/debian:buster
ARG DEBIAN_FRONTEND=noninteractive

# Install prerequisites
RUN apt-get update && apt-get -y upgrade && \
    apt-get install -y \
    ca-certificates \
    curl \
    iptables \
    kmod

# Download and install Docker binary
RUN curl -fsSL https://get.docker.com/ | sh


# Create user and set password
RUN useradd -m user && echo "bal:bal" | chpasswd
RUN usermod -aG docker bal
RUN echo 'root:root' | chpasswd

CMD [ "/bin/bash" ]
